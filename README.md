# Описание проекта

Этот проект — набор инструментов для обработки и защиты данных банковских карт и счетов. В нем реализованы функции для фильтрации и сортировки транзакций, а также маскировки номеров карт и счетов, чтобы обеспечить безопасность и конфиденциальность пользователей.

## Структура проекта

Проект организован следующим образом:

- **`src/`**:  
  - `widget.py`: функции для форматирования дат и скрытия данных.  
  - `processing.py`: обработка операций — фильтрация и сортировка.  
  - `masks.py`: маскировка номеров карт и счетов.  
  - `main.py`: пример использования всех функций.  
  - `__init__.py`: делает директорию пакетом Python.  
- **`tests/`**:  
  - `test_widget.py`: тесты для модуля `widget.py`.  
  - `test_processing.py`: тесты обработки транзакций.  
  - `test_mask.py`: тесты функций маскировки.  
  - `__init__.py`: обозначает директорию как пакет.

## Основные функции

### Модуль: `processing.py`

- **`filter_by_state(data, state='EXECUTED')`**  
  Фильтрует список словарей по значению поля `state`.  
  Возвращает отфильтрованный список операций с заданным статусом.

- **`sort_by_date(data, descending=True)`**  
  Сортирует операции по дате.  
  Возвращает отсортированный список в указанном порядке.

### Модуль: `masks.py`

- **`get_mask_card_number(card_number: str) -> str`**  
  Скрывает часть номера карты, оставляя видимыми первые 6 и последние 4 цифры.

- **`get_mask_account(account_number: str) -> str`**  
  Маскирует номер счета, показывая только последние 4 цифры.

### Модуль: `widget.py`

- **`mask_account_card(account_info)`**  
  Скрывает часть данных карты или счета для безопасного отображения.

- **`get_date(date_str)`**  
  Преобразует строку с датой в формат дд.мм.гггг.

### Модуль: `main.py`  
Демонстрирует работу всех функций на примерах.

## Обновленная структура с учетом тестирования

- **`data/`**:  
  - `operations.json`: данные для работы с `utils.py`.  
  - `transactions.csv`: данные в формате CSV для `reader.py`.  
  - `transactions_excel.xlsx`: данные в Excel для `reader.py`.  
  - `transactions_csv.py`: поиск файла `transactions.csv`.  
  - `transactions_excel.py`: поиск файла `transactions_excel.xlsx`.

- **`logs/`**:  
  - `masks.log`: логи для `masks.py`.  
  - `utils.log`: логи для `utils.py`.

- **`src/`**:  
  - `widget.py`: форматирование дат и маскировка данных.  
  - `processing.py`: фильтрация и сортировка операций.  
  - `masks.py`: скрытие номеров карт и счетов.  
  - `__init__.py`: обозначает пакет.  
  - `generators.py`: фильтрация транзакций и генерация номеров.  
  - `decorators.py`: логирование вызовов функций.  
  - `external_api.py`: конвертация валюты в рубли.  
  - `reader.py`: чтение CSV и Excel файлов.  
  - `search_reader.py`: возврат списка словарей.

- **`tests/`**:  
  - `test_widget.py`: проверка `widget.py`.  
  - `test_processing.py`: проверка `processing.py`.  
  - `test_mask.py`: проверка `masks.py`.  
  - `__init__.py`: обозначает пакет.  
  - `test_generators.py`: тесты генерации и фильтрации.  
  - `test_decorators.py`: тесты логирования функций.  
  - `test_external_api.py`: тесты конвертации валюты.  
  - `test_reader.py`: тесты чтения файлов.  
  - `test_search_reader.py`: тесты работы со списками словарей.

- **`main.py`**: связывает все функции в единое целое.

## Пример работы

Запустите `main.py`, чтобы увидеть:  
1. Маскировку номера карты.  
2. Маскировку номера счета.  
3. Обработку разных типов карт и счетов.  
4. Форматирование даты.

### Пример результата  



## Зависимости
- pandas (>=2.2.3,<3.0.0)
- openpyxl (>=3.1.5,<4.0.0)
- python-dotenv (>=1.0.1,<2.0.0)
- requests (>=2.32.3,<3.0.0)
- pytest (>=8.3.4,<9.0.0) [для тестирования]
